{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  email: '',\n  firstName: '',\n  lastName: '',\n  id: '',\n  createdAt: '',\n  updatedAt: ''\n};\nexport const fetchUserData = createAsyncThunk('user/getUserData', async token => {\n  const res = await axios({\n    method: 'post',\n    url: 'http://localhost:3001/api/v1/user/profile',\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data.body;\n});\nexport const updateUserData = createAsyncThunk('user/updateUserData', async data => {\n  const res = await axios({\n    method: 'put',\n    url: 'http://localhost:3001/api/v1/user/profile',\n    headers: {\n      Authorization: `Bearer ${data.token}`\n    },\n    data: data.userNames\n  });\n  return res.data.body;\n});\nexport const userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    emptyUserData(state) {\n      state.email = '';\n      state.firstName = '';\n      state.lastName = '';\n      state.id = '';\n      state.createdAt = '';\n      state.updatedAt = '';\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchUserData.fulfilled, (state, {\n      payload\n    }) => {\n      state.email = payload.email;\n      state.firstName = payload.firstName;\n      state.lastName = payload.lastName;\n      state.id = payload.id;\n      state.createdAt = payload.createdAt;\n      state.updatedAt = payload.updatedAt;\n    }).addCase(updateUserData.fulfilled, (state, {\n      payload\n    }) => {\n      state.firstName = payload.firstName;\n      state.lastName = payload.lastName;\n      state.updatedAt = payload.updatedAt;\n    });\n  }\n});\n\n// selectors\nexport const getUserData = state => state.user;\n\n//actions\nexport const {\n  emptyUserData\n} = userSlice.actions;\n\n//reducers\nexport const userReducer = userSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","email","firstName","lastName","id","createdAt","updatedAt","fetchUserData","token","res","method","url","headers","Authorization","data","body","updateUserData","userNames","userSlice","name","reducers","emptyUserData","state","extraReducers","builder","addCase","fulfilled","payload","getUserData","user","actions","userReducer","reducer"],"sources":["C:/Users/elist/OneDrive/Documents/GitHub/Projet-13-OC/Front-End/src/components/features/User/Slice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\r\nimport axios from 'axios'\r\n\r\nconst initialState = {\r\n    email: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    id: '',\r\n    createdAt: '',\r\n    updatedAt: '',\r\n}\r\n\r\nexport const fetchUserData = createAsyncThunk(\r\n    'user/getUserData',\r\n    async (token) => {\r\n        const res = await axios({\r\n            method: 'post',\r\n            url: 'http://localhost:3001/api/v1/user/profile',\r\n            headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n        return res.data.body\r\n    }\r\n)\r\n\r\nexport const updateUserData = createAsyncThunk(\r\n    'user/updateUserData',\r\n    async (data) => {\r\n        const res = await axios({\r\n            method: 'put',\r\n            url: 'http://localhost:3001/api/v1/user/profile',\r\n            headers: { Authorization: `Bearer ${data.token}` },\r\n            data: data.userNames,\r\n        })\r\n\r\n        return res.data.body\r\n    }\r\n)\r\n\r\nexport const userSlice = createSlice({\r\n    name: 'user',\r\n    initialState,\r\n    reducers: {\r\n        emptyUserData(state) {\r\n            state.email = ''\r\n            state.firstName = ''\r\n            state.lastName = ''\r\n            state.id = ''\r\n            state.createdAt = ''\r\n            state.updatedAt = ''\r\n        },\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(fetchUserData.fulfilled, (state, { payload }) => {\r\n                state.email = payload.email\r\n                state.firstName = payload.firstName\r\n                state.lastName = payload.lastName\r\n                state.id = payload.id\r\n                state.createdAt = payload.createdAt\r\n                state.updatedAt = payload.updatedAt\r\n            })\r\n            .addCase(updateUserData.fulfilled, (state, { payload }) => {\r\n                state.firstName = payload.firstName\r\n                state.lastName = payload.lastName\r\n                state.updatedAt = payload.updatedAt\r\n            })\r\n    },\r\n})\r\n\r\n// selectors\r\nexport const getUserData = (state) => state.user\r\n\r\n//actions\r\nexport const { emptyUserData } = userSlice.actions\r\n\r\n//reducers\r\nexport const userReducer = userSlice.reducer\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}