{"ast":null,"code":"// authSlice.js\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  credentials: '',\n  token: '',\n  connected: false,\n  status: 'idle',\n  error: null\n};\nconst BASE_URL = 'http://localhost:3001/api/v1/user/login';\nexport const getUserToken = createAsyncThunk('auth/getUserToken', async (credentials, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.post(BASE_URL, credentials);\n    return response.data;\n  } catch (error) {\n    return rejectWithValue(error.message || 'Unknown error');\n  }\n});\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    changeUserCredentials(state, action) {\n      state.credentials = action.payload;\n    },\n    logout(state) {\n      state.credentials = '';\n      state.token = '';\n      state.connected = false;\n      state.status = 'idle';\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(getUserToken.pending, state => {\n      state.status = 'loading';\n      state.connected = false;\n    }).addCase(getUserToken.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      state.token = action.payload.body.token;\n      state.connected = true;\n    }).addCase(getUserToken.rejected, (state, action) => {\n      state.status = 'failed';\n      state.connected = false;\n      state.error = action.payload || 'An error occurred';\n    });\n  }\n});\n\n// Selectors\nexport const getAuthStatus = state => state.auth.status;\nexport const getAuthConnected = state => state.auth.connected;\nexport const getAuthError = state => state.auth.error;\nexport const getAuthToken = state => state.auth.token;\n\n// Actions\nexport const {\n  changeUserCredentials,\n  logout\n} = authSlice.actions;\n\n// Reducer\nexport default authSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","credentials","token","connected","status","error","BASE_URL","getUserToken","rejectWithValue","response","post","data","message","authSlice","name","reducers","changeUserCredentials","state","action","payload","logout","extraReducers","builder","addCase","pending","fulfilled","body","rejected","getAuthStatus","auth","getAuthConnected","getAuthError","getAuthToken","actions","reducer"],"sources":["C:/Users/elist/OneDrive/Documents/GitHub/Projet-13-OC/Front-End/src/components/features/Auth/SliceAuth.js"],"sourcesContent":["// authSlice.js\r\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\nconst initialState = {\r\n    credentials: '',\r\n    token: '',\r\n    connected: false,\r\n    status: 'idle',\r\n    error: null,\r\n};\r\n\r\nconst BASE_URL = 'http://localhost:3001/api/v1/user/login';\r\n\r\nexport const getUserToken = createAsyncThunk(\r\n    'auth/getUserToken',\r\n    async (credentials, { rejectWithValue }) => {\r\n        try {\r\n            const response = await axios.post(BASE_URL, credentials);\r\n            return response.data;\r\n        } catch (error) {\r\n            return rejectWithValue(error.message || 'Unknown error');\r\n        }\r\n    }\r\n);\r\n\r\nexport const authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState,\r\n    reducers: {\r\n        changeUserCredentials(state, action) {\r\n            state.credentials = action.payload;\r\n        },\r\n        logout(state) {\r\n            state.credentials = '';\r\n            state.token = '';\r\n            state.connected = false;\r\n            state.status = 'idle';\r\n            state.error = null;\r\n        },\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(getUserToken.pending, (state) => {\r\n                state.status = 'loading';\r\n                state.connected = false;\r\n            })\r\n            .addCase(getUserToken.fulfilled, (state, action) => {\r\n                state.status = 'succeeded';\r\n                state.token = action.payload.body.token;\r\n                state.connected = true;\r\n            })\r\n            .addCase(getUserToken.rejected, (state, action) => {\r\n                state.status = 'failed';\r\n                state.connected = false;\r\n                state.error = action.payload || 'An error occurred';\r\n            });\r\n    },\r\n});\r\n\r\n// Selectors\r\nexport const getAuthStatus = (state) => state.auth.status;\r\nexport const getAuthConnected = (state) => state.auth.connected;\r\nexport const getAuthError = (state) => state.auth.error;\r\nexport const getAuthToken = (state) => state.auth.token;\r\n\r\n// Actions\r\nexport const { changeUserCredentials, logout } = authSlice.actions;\r\n\r\n// Reducer\r\nexport default authSlice.reducer;\r\n"],"mappings":"AAAA;AACA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAG;EACjBC,WAAW,EAAE,EAAE;EACfC,KAAK,EAAE,EAAE;EACTC,SAAS,EAAE,KAAK;EAChBC,MAAM,EAAE,MAAM;EACdC,KAAK,EAAE;AACX,CAAC;AAED,MAAMC,QAAQ,GAAG,yCAAyC;AAE1D,OAAO,MAAMC,YAAY,GAAGV,gBAAgB,CACxC,mBAAmB,EACnB,OAAOI,WAAW,EAAE;EAAEO;AAAgB,CAAC,KAAK;EACxC,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAACW,IAAI,CAACJ,QAAQ,EAAEL,WAAW,CAAC;IACxD,OAAOQ,QAAQ,CAACE,IAAI;EACxB,CAAC,CAAC,OAAON,KAAK,EAAE;IACZ,OAAOG,eAAe,CAACH,KAAK,CAACO,OAAO,IAAI,eAAe,CAAC;EAC5D;AACJ,CACJ,CAAC;AAED,OAAO,MAAMC,SAAS,GAAGf,WAAW,CAAC;EACjCgB,IAAI,EAAE,MAAM;EACZd,YAAY;EACZe,QAAQ,EAAE;IACNC,qBAAqBA,CAACC,KAAK,EAAEC,MAAM,EAAE;MACjCD,KAAK,CAAChB,WAAW,GAAGiB,MAAM,CAACC,OAAO;IACtC,CAAC;IACDC,MAAMA,CAACH,KAAK,EAAE;MACVA,KAAK,CAAChB,WAAW,GAAG,EAAE;MACtBgB,KAAK,CAACf,KAAK,GAAG,EAAE;MAChBe,KAAK,CAACd,SAAS,GAAG,KAAK;MACvBc,KAAK,CAACb,MAAM,GAAG,MAAM;MACrBa,KAAK,CAACZ,KAAK,GAAG,IAAI;IACtB;EACJ,CAAC;EACDgB,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CACFC,OAAO,CAAChB,YAAY,CAACiB,OAAO,EAAGP,KAAK,IAAK;MACtCA,KAAK,CAACb,MAAM,GAAG,SAAS;MACxBa,KAAK,CAACd,SAAS,GAAG,KAAK;IAC3B,CAAC,CAAC,CACDoB,OAAO,CAAChB,YAAY,CAACkB,SAAS,EAAE,CAACR,KAAK,EAAEC,MAAM,KAAK;MAChDD,KAAK,CAACb,MAAM,GAAG,WAAW;MAC1Ba,KAAK,CAACf,KAAK,GAAGgB,MAAM,CAACC,OAAO,CAACO,IAAI,CAACxB,KAAK;MACvCe,KAAK,CAACd,SAAS,GAAG,IAAI;IAC1B,CAAC,CAAC,CACDoB,OAAO,CAAChB,YAAY,CAACoB,QAAQ,EAAE,CAACV,KAAK,EAAEC,MAAM,KAAK;MAC/CD,KAAK,CAACb,MAAM,GAAG,QAAQ;MACvBa,KAAK,CAACd,SAAS,GAAG,KAAK;MACvBc,KAAK,CAACZ,KAAK,GAAGa,MAAM,CAACC,OAAO,IAAI,mBAAmB;IACvD,CAAC,CAAC;EACV;AACJ,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMS,aAAa,GAAIX,KAAK,IAAKA,KAAK,CAACY,IAAI,CAACzB,MAAM;AACzD,OAAO,MAAM0B,gBAAgB,GAAIb,KAAK,IAAKA,KAAK,CAACY,IAAI,CAAC1B,SAAS;AAC/D,OAAO,MAAM4B,YAAY,GAAId,KAAK,IAAKA,KAAK,CAACY,IAAI,CAACxB,KAAK;AACvD,OAAO,MAAM2B,YAAY,GAAIf,KAAK,IAAKA,KAAK,CAACY,IAAI,CAAC3B,KAAK;;AAEvD;AACA,OAAO,MAAM;EAAEc,qBAAqB;EAAEI;AAAO,CAAC,GAAGP,SAAS,CAACoB,OAAO;;AAElE;AACA,eAAepB,SAAS,CAACqB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}